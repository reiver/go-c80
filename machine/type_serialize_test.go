package c80machine_test

import (
	"github.com/reiver/go-c80/machine"

	"testing"
)

func TestType_Serialize(t *testing.T) {

	tests := []struct{
		Machine *c80machine.Type
		Expected string
	}{
		{
			Machine: func()*c80machine.Type{
				var machine c80machine.Type

				return &machine
			}(),
			Expected: "IMAGE:iVBORw0KGgoAAAANSUhEUgAAAQAAAAEgCAYAAABb3q1QAAADV0lEQVR4nOzUAREAAAgDIc/+oRfkIQR/QJYAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgDABQJgAIEwAECYACBMAhAkAwgQAYQKAMAFAmAAgTAAQJgAIEwCECQDCBABhAoAwAUCYACBMABAmAAgTAIQJAMIEAGECgLAFAAD//5LGAkGTT9TaAAAAAElFTkSuQmCC",
		},
		{
			Machine: func()*c80machine.Type{
				var machine c80machine.Type

				const index = 2

				machine.Palette().SetColorRGB(index,  0,0,0)
				machine.DrawDye(machine.Palette().Color(index))

				return &machine
			}(),
			Expected: "IMAGE:iVBORw0KGgoAAAANSUhEUgAAAQAAAAEgCAIAAADUvDoHAAAC60lEQVR4nOzTAREAAAgDIc/+oRfkoQN/ECYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkCkCYAaQKQJgBpApAmAGkLAAD//z+sAkGsJzQnAAAAAElFTkSuQmCC",
		},
		{
			Machine: func()*c80machine.Type{
				var machine c80machine.Type

				const index = 1

				machine.Palette().SetColorRGB(index,  255,199,6)
				machine.DrawDye(machine.Palette().Color(index))

				return &machine
			}(),
			Expected: "IMAGE:iVBORw0KGgoAAAANSUhEUgAAAQAAAAEgCAIAAADUvDoHAAADGklEQVR4nOzTQQ0AIRDAwMuF4N8VskDGPjqjoJ+ue/YHVf90AEwyAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSXgAAAP//4EQED7U/dIwAAAAASUVORK5CYII=",
		},
		{
			Machine: func()*c80machine.Type{
				var machine c80machine.Type

				const index = 11

				machine.Palette().SetColorRGB(index,  0,111,184)
				machine.DrawDye(machine.Palette().Color(index))

				return &machine
			}(),
			Expected: "IMAGE:iVBORw0KGgoAAAANSUhEUgAAAQAAAAEgCAIAAADUvDoHAAADGUlEQVR4nOzTMRHAMAzAQF+vfEMv8ALDg/4RaNE/5w5UfdsBsMkApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUgzAGkGIM0ApBmANAOQZgDSDECaAUh7AQAA//8lmgNq4rolsAAAAABJRU5ErkJggg==",
		},
	}

	for testNumber, test := range tests {

		actual := test.Machine.Serialize()

		if expected := test.Expected; expected != actual {
			t.Errorf("For test #%d, the actual value was not what was expected." , testNumber)
			t.Logf("EXPECTED: %q", expected)
			t.Logf("ACTUAL:   %q", actual)
			continue
		}
	}
}
